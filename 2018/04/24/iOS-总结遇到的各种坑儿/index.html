<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>iOS-总结遇到的各种坑儿 | 时光书馆</title><link rel="stylesheet" type="text/css" href="../../../../css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="../../../../favicon.ico"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../../../../apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="../../../../atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">iOS-总结遇到的各种坑儿</h1><a id="logo" href="../../../../.">时光书馆</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="../../../../."><i class="fa fa-home"> 首页</i></a><a href="../../../../archives/"><i class="fa fa-archive"> 归档</i></a><a href="../../../../about/"><i class="fa fa-user"> 关于</i></a><a href="../../../../atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">iOS-总结遇到的各种坑儿</h1><div class="post-meta">Apr 24, 2018</div><div class="post-content"><p>持续更新中。。。另一篇&lt;iOS开发过程中遇到的新奇玩意儿&gt;</p>
<h2 id="一、将字符串转换成json时："><a href="#一、将字符串转换成json时：" class="headerlink" title="一、将字符串转换成json时："></a>一、将字符串转换成json时：</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSData *<span class="keyword">jsonData </span>= [<span class="keyword">jsonString </span>dataUsingEncoding:NSUTF8StringEncoding]<span class="comment">;</span></span><br><span class="line">NSError *err<span class="comment">;</span></span><br><span class="line">id obj = [NSJSONSerialization <span class="keyword">JSONObjectWithData:jsonData </span>options:NSJSONReadingMutableContainers</span><br><span class="line"><span class="symbol">                                                          error:</span>&amp;err]<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>如果jsonString是以下格式，即包含\r\n换行符时，会解析失败<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"content"</span>:<span class="string">"测试\r\n "</span>,<span class="attr">"url"</span>:<span class="string">"http://www.baidu.com"</span>&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="二、跑项目的时候报错：dyld-Symbol-not-found-OBJC-CLASS"><a href="#二、跑项目的时候报错：dyld-Symbol-not-found-OBJC-CLASS" class="headerlink" title="二、跑项目的时候报错：dyld: Symbol not found: _OBJC_CLASS_$_**"></a>二、跑项目的时候报错：dyld: Symbol not found: _OBJC_CLASS_$_**</h2><p>如果<strong> 是自定义类的话，只需在Build Phases中的Compile Sources点击+添加那个类的.m。<br>如果 </strong> 是frameWork的话，只需在Build Phases中的Link Binary With Libraries将对应的frameWork右侧的Required改为Optional。</p>
<h2 id="三、float精度问题"><a href="#三、float精度问题" class="headerlink" title="三、float精度问题"></a>三、float精度问题</h2><p>在声明float的时候值就不准：<br>static float  a = 0.8；//0.8f也一样<br>打印a绝对不是0.8，要比0.8大一点</p>
<p>目前解决办法：<br> static const float a = 0.80;//这样完全是0.800000</p>
<p>手动去掉5.0、5.500这种后边的0<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSString</span>*)converFloat:(<span class="built_in">CGFloat</span>)floatValue&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSString</span> * floatStr = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%f"</span>,floatValue];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> * floatChars = [floatStr UTF8String];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> strLength = (<span class="keyword">int</span>)floatStr.length;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> zeroCount = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = strLength<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (floatChars[i] == <span class="string">'0'</span> || floatChars[i] == <span class="string">'.'</span>) &#123;</span><br><span class="line">            zeroCount++;</span><br><span class="line">            <span class="keyword">if</span> (floatChars[i] == <span class="string">'.'</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> [floatStr substringToIndex:strLength-zeroCount];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>oc提供的货币计算，会自动去掉5.0、5.500这种后边的0<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSString</span>*)calculateFloatA:(<span class="built_in">CGFloat</span>)a floatB:(<span class="built_in">CGFloat</span>)b&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *strA = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%f"</span>,a];</span><br><span class="line">    <span class="built_in">NSString</span> *strB = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%f"</span>,b];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSDecimalNumber</span> *numberA = [<span class="built_in">NSDecimalNumber</span> decimalNumberWithString:strA];</span><br><span class="line">    <span class="built_in">NSDecimalNumber</span> *numberB = [<span class="built_in">NSDecimalNumber</span> decimalNumberWithString:strB];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// 这里不仅包含Multiply还有加 减 除。</span></span><br><span class="line">    <span class="built_in">NSDecimalNumber</span> *numResult = [numberA decimalNumberByMultiplyingBy:numberB];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *strResult = [numResult stringValue];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"NSDecimalNumber method  unrounding = %@"</span>,strResult);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> strResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="四、时间NSDate-与NSString转换"><a href="#四、时间NSDate-与NSString转换" class="headerlink" title="四、时间NSDate 与NSString转换"></a>四、时间NSDate 与NSString转换</h2><p>NSString转换成NSDate会自动转换成UTC时区。</p>
<h2 id="五、tabbar图片变大问题"><a href="#五、tabbar图片变大问题" class="headerlink" title="五、tabbar图片变大问题"></a>五、tabbar图片变大问题</h2><p> R:tabbar自动放大了图片，只要让图片保持原比例就行了<br> S:   UIImage <em> nomalImage =[UIImage imageNamed:[NSString stringWithFormat:@”%@”,imageName]];<br>    UIImage </em> selectImage =[UIImage imageNamed:[NSString stringWithFormat:@”%@_sele”,imageName]];<br>    selectImage = [selectImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];<br>    nomalImage = [nomalImage imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="../iOS-画虚线的几种方式/">iOS-画虚线的几种方式</a><a class="next" href="../iOS-开发中手势方法的使用/">iOS-开发中手势方法的使用</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://kasign.github.io/blog"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/iOS开发/">iOS开发</a><span class="category-list-count">22</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="../../../../tags/调试/" style="font-size: 15px;">调试</a> <a href="../../../../tags/3D/" style="font-size: 15px;">3D</a> <a href="../../../../tags/SSH/" style="font-size: 15px;">SSH</a> <a href="../../../../tags/textField/" style="font-size: 15px;">textField</a> <a href="../../../../tags/iPhone型号/" style="font-size: 15px;">iPhone型号</a> <a href="../../../../tags/cpu/" style="font-size: 15px;">cpu</a> <a href="../../../../tags/内存/" style="font-size: 15px;">内存</a> <a href="../../../../tags/Unity/" style="font-size: 15px;">Unity</a> <a href="../../../../tags/打包/" style="font-size: 15px;">打包</a> <a href="../../../../tags/FPS/" style="font-size: 15px;">FPS</a> <a href="../../../../tags/界面流畅/" style="font-size: 15px;">界面流畅</a> <a href="../../../../tags/指针/" style="font-size: 15px;">指针</a> <a href="../../../../tags/iOS审核/" style="font-size: 15px;">iOS审核</a> <a href="../../../../tags/键值依赖/" style="font-size: 15px;">键值依赖</a> <a href="../../../../tags/KVO/" style="font-size: 15px;">KVO</a> <a href="../../../../tags/Git/" style="font-size: 15px;">Git</a> <a href="../../../../tags/LLDB/" style="font-size: 15px;">LLDB</a> <a href="../../../../tags/启动图/" style="font-size: 15px;">启动图</a> <a href="../../../../tags/交互/" style="font-size: 15px;">交互</a> <a href="../../../../tags/js/" style="font-size: 15px;">js</a> <a href="../../../../tags/WKWebView/" style="font-size: 15px;">WKWebView</a> <a href="../../../../tags/文字/" style="font-size: 15px;">文字</a> <a href="../../../../tags/画虚线/" style="font-size: 15px;">画虚线</a> <a href="../../../../tags/响应/" style="font-size: 15px;">响应</a> <a href="../../../../tags/数学函数/" style="font-size: 15px;">数学函数</a> <a href="../../../../tags/多线程/" style="font-size: 15px;">多线程</a> <a href="../../../../tags/GCD/" style="font-size: 15px;">GCD</a> <a href="../../../../tags/动画/" style="font-size: 15px;">动画</a> <a href="../../../../tags/layer/" style="font-size: 15px;">layer</a> <a href="../../../../tags/证书/" style="font-size: 15px;">证书</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="../../../07/25/iOS保持界面流畅的技巧/">iOS保持界面流畅的技巧</a></li><li class="post-list-item"><a class="post-list-link" href="../../../07/17/【Unity】Unity-工程配置打包成-iOS-工程/">【Unity】Unity 工程配置打包成 iOS 工程</a></li><li class="post-list-item"><a class="post-list-link" href="../../../06/13/iOS获取各类基本信息（型号，cpu）/">iOS获取各类基本信息（型号，cpu）</a></li><li class="post-list-item"><a class="post-list-link" href="../../../05/25/TextField标记区选择区/">TextField标记区选择区</a></li><li class="post-list-item"><a class="post-list-link" href="../../../05/23/Git中ssh配置（完美解决）/">Git中ssh配置（完美解决）</a></li><li class="post-list-item"><a class="post-list-link" href="../../../05/08/CATransform3D详解/">CATransform3D详解</a></li><li class="post-list-item"><a class="post-list-link" href="../iOS-画虚线的几种方式/">iOS-画虚线的几种方式</a></li><li class="post-list-item"><a class="post-list-link" href="">iOS-总结遇到的各种坑儿</a></li><li class="post-list-item"><a class="post-list-link" href="../iOS-开发中手势方法的使用/">iOS-开发中手势方法的使用</a></li><li class="post-list-item"><a class="post-list-link" href="../iOS-copy与strong声明属性时的区别/">iOS-copy与strong声明属性时的区别</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="../../../../." rel="nofollow">时光书馆.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../../../../js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="../../../../js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="../../../../js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="../../../../js/smartresize.js?v=1.0.0"></script></div></body></html>